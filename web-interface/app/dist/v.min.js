const VDom=function(){"use strict";function e(e,t){e.append(t)}function t(e){const t=e.t?document.createElement(e.t):document.createElement(e.tag);for(const n in e)if(["s","setStyle","setStyles"].includes(n))o("component-styles",e[n]);else if(["c","class","classes"].includes(n))t.className=e[n];else if(["click"].includes(n))t.addEventListener("click",e[n]);else if(["y","style","styles"].includes(n))Object.assign(t.style,e[n]);else if(["i","id"].includes(n))t.setAttribute("id",e[n]);else if(["f","href"].includes(n))t.setAttribute("href",e[n]);else if(["a","attribute","attributes"].includes(n))for(const a in e[n])t.setAttribute(a,e[n][a]);else["h","html"].includes(n)&&("object"==typeof e[n]?t.appendChild(e[n]):"string"==typeof e[n]&&(t.innerHTML=e[n]));return t}function n(n,s){if(!s||"clear"!=s&&1!=s.clear){if(!s){if(n.t||n.tag)return t(n);throw new Error("Can not set node")}{let o=n;"string"==typeof n&&(o=a(n)),Array.isArray(s)?s.forEach(t=>{e(o,t)}):"object"==typeof s&&(s.t||s.tag?e(o,t(s)):e(o,s))}}else{const e=document.querySelector(n);e&&e.parentNode.removeChild(e)}}function a(e){const t=document.querySelector(e);if(t)return Object.assign(t,{getNode:a}),t}function s(e,t,n){let s=e;"string"==typeof e&&(s=a(e));return null==n&&(n={}),null!=n.delay&&(n.delay=250*n.delay),null!=n.duration&&(n.duration=250*n.duration),Velocity(s,t,n)}function o(e,t){document.getElementById(e)||n("head",{t:"style",i:e});const a=document.getElementById(e);"string"==typeof t?a.innerHTML.includes(t)||(a.innerHTML+=t):"object"==typeof t&&(a.innerHTML+=function(e,t){let n="";for(const a in e){const s=(e=>e.includes("@font-face")?"@font-face{":"."+e+"{")(a);if(!t.innerHTML.includes(s)){n+=s;for(const t in e[a])n+=t+":"+e[a][t]+";";n+="}"}}return n}(t,a))}return{castNode:t,cN:function(e){return t(e)},setNode:n,sN:function(e,t){return n(e,t)},getNode:a,gN:function(e){return a(e)},setAnimation:s,sA:function(e,t,n){return s(e,t,n)},setStyle:o,setClick:function(e,t){a(e).addEventListener("click",t)},getCss:function(e){return Number(getComputedStyle(document.documentElement).getPropertyValue(e).replace("px","").replace("rem",""))},castRemToPixel:function(e){return Number(e)*parseFloat(getComputedStyle(document.documentElement).fontSize)}}}(),VAction=function(){"use strict";const e={forbiddenFirstNamesEN:["to","and"],forbiddenFirstNamesDE:["an","und"],commandsHelp:["help","hilfe","도움"],commandsSearch:["search","suche","find","finde","fx","f!","view"],commands:["nukeme","crashapp","verify","disable","enable","makeadmin","revokeadmin","analyse","a!","payouttokennow"],commandsEN:["+","-","pay","send","request","transfer","sx","s!","rx","r!","tx","t!"],commandsDE:["zahle","sende","empfange","leite","zahlen","senden","empfangen","leiten"],commandsKO:["더하기","지불하다","전송","요청"],misspellingsEN:["sent","sned","sedn","semd","sen ","snd ","sed "],misspellingsDE:["TODO"]};return{setEndpoint:function(t,n){if("new entity"==t)return V.setEntity("new entity",n,V.getSetting("entityLedger"));if("new message"==t){const t=n.trim().replace(/(?:\r\n|\r|\n)/g," ").replace(/<[^>]+>/g,"");if(t.indexOf("vx")>-1)return Promise.resolve({status:"error",message:"unique phrase entered?"});if(null===t.match(/[a-zA-Z0-9+]/))return Promise.resolve({status:"error",message:"not a valid message"});if(e.misspellingsEN.concat(e.misspellingsDE).indexOf(t.substr(0,4))>=0)return Promise.resolve({status:"error",message:"misspelled trigger"});{const n=function(e,t){const n=t.commands.concat(t.commandsHelp,t.commandsSearch,t.commandsEN,t.commandsDE,t.commandsKO),a=e.trim().split(" ");return"+"!==a[0].charAt(0)&&"-"!==a[0].charAt(0)||(a.splice(1,0,a[0].slice(1)),a.splice(0,1,a[0].charAt(0))),-1!=n.indexOf(a[0].toLowerCase())&&(a[0]=a[0].toLowerCase(),a)}(t,e);if(!n)return V.setMessage("new message",{msg:t},V.getSetting("chatLedger"));if(-1!=e.commandsHelp.indexOf(n[0]))$(".notification-container").remove(),$("#messages-ul").append('<li class="notification-container highlight" onclick="$(this).slideUp( 100, function() {})">'+str10110+'<span class="close-x"><i class="fas fa-times-circle close-x"></i></span></li>'),autoScroll();else if(-1!=e.commandsSearch.indexOf(n[0]))findAndDisplayEntity(message);else{if("nukeme"===n[0])return V.setData("nukeme");if("crashapp"===n[0])return V.setData("crash-app");if("verify"!==n[0])return V.setTransaction("new transaction",n,V.getSetting("transactionLedger"));V.setData("new verification",n[1],V.getSetting("transactionLedger"))}}}}}}(),VEntity=function(){"use strict";const e={capWordLength:7,maxEntityWords:7,maxHumanWords:3,maxWordLength:12};return{getEntity:function(e,t){return V.getData(e,t,V.getSetting("entityLedger"))},setEntity:function(t,n,a){return s=n.title,o=n.role,i=s.split(" ").length,r=s.split(" ").map(t=>t.length>e.maxWordLength),["vx","Vx","0x"].includes(s.substring(0,2))||s.length>200||s.length<2||-1!=s.indexOf("#")||-1!=s.indexOf("2121")||i>e.capWordLength||["member","network"].includes(o)&&i>e.maxHumanWords||-1==["member","network"].indexOf(o)&&i>e.maxEntityWords||r.includes(!0)?Promise.resolve({status:"invalid title",message:"invalid title"}):(n.title=function(e){let t=e;return"string"==typeof e&&(t=e.trim().toLowerCase().split(" ")),t.map((function(e){return e.length>2&&"mc"==e.substr(0,2)?e.charAt(0).toUpperCase()+e.slice(1,2)+e.charAt(2).toUpperCase()+e.slice(3):e.length>3&&"mac"==e.substr(0,3)?e.charAt(0).toUpperCase()+e.slice(1,3)+e.charAt(3).toUpperCase()+e.slice(4):e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")}(n.title),async function(e){return"#2121"}(n.title).then(e=>(n.tag=e,V.setData(t,n,a))));var s,o,i,r},getAllEntityData:async function(){const e=V.getState("activeAddress"),t=V.getEntity("by ethAddress",e).then(e=>e),n=V.getAddressState(e).then(e=>e),a=await Promise.all([t,n]);return{name:a[0].data[0].fullId,ethBalance:a[1].data.ethBalance,tokenBalance:a[1].data.tokenBalance,liveBalance:a[1].data.liveBalance,lastBlock:a[1].data.lastBlock,zeroBlock:a[1].data.zeroBlock}}}}(),VMessage=function(){"use strict";return{getMessage:function(e){},setMessage:function(e,t,n){return V.setData(e,t,n)}}}(),VTransaction=function(){"use strict";async function e(e){const t=e.slice(),n=Date.now(),a=Number(Math.floor(n/1e3)),s=t.indexOf(V.i18n("for")),o=t.indexOf(V.i18n("to"));let i="",r="",c=0;const l=t[0];if(-1!=s&&(i=t.splice(s,t.length),i.shift(),i=i.join(" ").trim()),-1==o||isNaN(t[o-1])){t.shift();for(let e=t.length-1;e>=0;e--){if("#"===t[e].charAt(0)){r=t.join(" ").trim();break}isNaN(Number(t[e]))||(c+=Number(t[e]),t.pop())}}else{const e=t.splice(0,o+1);c=e.filter((function(e){return Number(parseInt(e)==e)})).reduce((function(e,t){return Number(e)+Number(t)}),0),r=t.join(" ").trim()}const u=V.getState("activeEntity"),d=await V.getEntity("by fullId",r);return u?{status:"success",date:new Date,amount:c,currency:"V",command:l,initiator:u.fullId,initiatorAddress:u.ethCredentials.address,sender:u.fullId,senderAddress:u.ethCredentials.address,recipient:r,recipientAddress:d.data[0].ethCredentials.address,reference:i,timeSecondsUNIX:a,origMessage:e}:{status:"no active entity"}}return{getTransaction:function(e){},setTransaction:async function(t,n,a){const s=await e(n);return 0==s.amount?Promise.resolve({status:"error",message:"invalid or no amount"}):"no active entity"==s.status?Promise.resolve({status:"error",message:"no active entity"}):V.setData(t,s,a)}}}(),VDebugHelper=function(){"use strict";const e=VDom.setNode({tag:"debug",classes:"debug",setStyle:{debug:{position:"fixed",top:"7rem",margin:"6px","font-size":"0.9rem",cursor:"pointer",background:"bisque","z-index":9999,"max-width":"340px","word-wrap":"anywhere",padding:"10px","list-style":"none","max-height":"410px","overflow-y":"scroll"}},html:VDom.setNode({tag:"ul"})});return e.addEventListener("click",(function(){VDom.setNode("debug","clear")})),{debug:function(t,n,a,s,o,i){const r=[t,n,a,s,o,i];console.log("*** debug ***"),e.appendChild(VDom.setNode({tag:"li",html:"*** debug ***"})),r.forEach(t=>{null!=t&&(console.log(t),e.appendChild(VDom.setNode({tag:"li",html:JSON.stringify(t)})))}),VDom.setNode("body",e)}}}(),VHelper=function(){"use strict";function e(e){return e}return{castLinks:function(e){var t=e.replace(/www./gi,"www.").replace(/http/gi,"http").replace(/https/gi,"https"),n=t.match(/(?:www|https?)[^\s]+/g),a=[];if(null!=n){for(let e=0;e<n.length;e++){let s=n[e];n[e].match(/(http(s?)):\/\//)||(s="http://"+n[e]);let o=s.split("/")[2];if("www"==o.substring(0,3)&&(o=o.replace("www.","")),o.match(/youtu/)){const e=s.split("/").slice(-1)[0];a.push('<iframe src="https://www.youtube.com/embed/'+e+'" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>')}else if(o.match(/vimeo/)){const e=s.split("/").slice(-1)[0];a.push('<iframe src="https://player.vimeo.com/video/'+e+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>')}else a.push('<a href="'+s+'" target="_blank">'+o+"</a>");t=t.split(n[e]).map(t=>a[e].includes("iframe")?t.trim():t).join(a[e])}return t}return e},castTime:function(e,t){return moment(e).format(t||"D MMM YYYY h:mm a")},castInitials:function(e){const t=e.split(" ").filter(e=>isNaN(e)),n=t[0].charAt(0),a=t[0].substr(1).split("").filter(e=>-1==["a","e","i","o","u"].indexOf(e))[0];return n+(t[1]?t[1].charAt(0):a?a.toUpperCase():"")},castCamelCase:function(e){return e.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,(e,t)=>t.toUpperCase())},getIcon:function(e){return"+"==e?'<span class="plus-icon fs-l no-txt-select">+</span>':'<img src="assets/icon/'+e+'-24px.svg" height="16px">'},setPipe:function(...e){return t=>e.reduce((e,t)=>t(e),t)},getTranslation:e,i18n:function(e){return e}}}(),VLedger=function(){"use strict";function e(e,t,n){const a=n.split(" ");return"http"==a[0]?function(e,t){const n=t?{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}:{method:"GET"};return fetch(e,n).then(e=>e.json()).then(e=>e).catch(e=>({status:"error",message:e}))}(e):"mongodb"==a[0]&&"socket"==a[1]?new Promise(n=>{socket.emit(e,t,(function(e){n(e)}))}):void 0}return{launch:async function(){V.getSetting("socketUse")&&V.sN("head",{t:"script",a:{src:"dist/socket.io.min.js",onload:"VLedger.setSocket()"}}),V.getSetting("web3Use")&&V.sN("head",{t:"script",a:{src:"dist/web3.min.js"}})},setSocket:function(){const e=V.getSetting("socketHost"),t=V.getSetting("socketPort"),n=e+(t?":"+t:"");window.socket=io.connect(n,{secure:!0}),socket.on("connect",()=>{console.log(socket.id,"connected")}),socket.on("connect_error",e=>{V.debug(e)})},getData:e,setData:function(t,n,a){const s=a.split(" ");if("mongodb"==s[0]&&"socket"==s[1])return e(t,n,a);if("evm"==s[0]){if("new transaction"==t){if("ETH"==n.currency)return V.setEtherTransaction(n);if("V"==n.currency)return V.setTokenTransaction(n)}if("new verification"==t)return V.setAddressVerification(n)}}}}(),VWeb3=function(){"use strict";let e,t;function n(e){return Number(e/1e6).toFixed(0)}return{setActiveAddress:async function(){return async function(){let e;if(window.ethereum){e=window.ethereum,window.ethereum.selectedAddress||Join.draw("wallet locked");try{await window.ethereum.enable()}catch(e){return{status:"auth denied",message:"user denied authorization"}}}else window.web3&&(e=window.web3.currentProvider);return new Web3(e)}().then(n=>{if(n.currentProvider&&n.currentProvider.publicConfigStore){e=n,t=new e.eth.Contract(JSON.parse(JSON.stringify([{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"communityTax",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"initialBalance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"multiplier",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"lastGenerationBlock",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"communityTaxAccount",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_newController",type:"address"}],name:"changeController",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"value",type:"uint256"}],name:"burn",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"zeroBlock",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"lifetime",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"value",type:"uint256"}],name:"burnFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"blocksMined",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"account",type:"address"}],name:"addMinter",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"renounceMinter",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"taxFeeDecimals",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"transactionFee",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"lastTransactionBlock",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"account",type:"address"}],name:"isMinter",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"generationAmount",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_fuseID",type:"uint8"},{name:"_confirm",type:"bool"}],name:"blowFuse",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_confirm",type:"bool"}],name:"blowAllFuses",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"generationPeriod",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"accountApproved",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"controller",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{name:"_name",type:"string"},{name:"_symbol",type:"string"},{name:"_decimals",type:"uint8"},{name:"_lifetime",type:"uint256"},{name:"_generationAmount",type:"uint256"},{name:"_generationPeriod",type:"uint256"},{name:"_communityTax",type:"uint256"},{name:"_transactionFee",type:"uint256"},{name:"_initialBalance",type:"uint256"},{name:"_communityTaxAccount",type:"address"},{name:"_controller",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"_account",type:"address"},{indexed:!1,name:"_income",type:"uint256"}],name:"IncomeReceived",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_account",type:"address"},{indexed:!1,name:"_decay",type:"uint256"}],name:"Decay",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Mint",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_account",type:"address"}],name:"NewAccount",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Burn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"PaidTax",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"BurnedFees",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_account",type:"address"}],name:"ApproveAccount",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_account",type:"address"}],name:"UnapproveAccount",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_lifetime",type:"uint256"}],name:"UpdateLifetime",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_initialBalance",type:"uint256"}],name:"UpdateInitialBalance",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_generationAmount",type:"uint256"}],name:"UpdateGenerationAmount",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_generationPeriod",type:"uint256"}],name:"UpdateGenerationPeriod",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_newCommunityTaxAccount",type:"address"}],name:"UpdateCommunityTaxAccount",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_transactionFee",type:"uint256"}],name:"UpdateTransactionFee",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_communityTax",type:"uint256"}],name:"UpdateCommunityTax",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_block",type:"uint256"}],name:"Mined",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_name",type:"string"},{indexed:!1,name:"_value",type:"uint256"}],name:"Log",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_fuseID",type:"uint8"}],name:"BlowFuse",type:"event"},{anonymous:!1,inputs:[],name:"BlowAllFuses",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_newController",type:"address"}],name:"ChangeController",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"}],name:"MinterAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"}],name:"MinterRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{constant:!0,inputs:[{name:"_blockNumber",type:"uint256"},{name:"_lastGenerationBlock",type:"uint256"},{name:"_generationPeriod",type:"uint256"}],name:"calcNumCompletedPeriods",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!1,inputs:[{name:"_account",type:"address"}],name:"triggerOnchainBalanceUpdate",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_blockNumber",type:"uint256"},{name:"_lastGenerationBlock",type:"uint256"},{name:"_lifetime",type:"uint256"},{name:"_generationAmount",type:"uint256"},{name:"_generationPeriod",type:"uint256"}],name:"calcGeneration",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!0,inputs:[{name:"_account",type:"address"}],name:"liveBalanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_account",type:"address"}],name:"getDecayedBalance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"",type:"address"},{name:"",type:"address"},{name:"",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_value",type:"uint256"},{name:"_feeRate",type:"uint256"},{name:"_taxRate",type:"uint256"}],name:"calcTax",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!0,inputs:[{name:"_value",type:"uint256"},{name:"_feeRate",type:"uint256"},{name:"_taxRate",type:"uint256"}],name:"calcFeesToBurn",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!0,inputs:[{name:"_value",type:"uint256"},{name:"_feeRate",type:"uint256"}],name:"calcFeesIncTax",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!0,inputs:[{name:"_account",type:"address"}],name:"getDetails",outputs:[{name:"_lastBlock",type:"uint256"},{name:"_balance",type:"uint256"},{name:"_zeroBlock",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_value",type:"uint256"},{name:"_balance",type:"uint256"},{name:"_blockNumber",type:"uint256"},{name:"_lifetime",type:"uint256"},{name:"_originalZeroBlock",type:"uint256"}],name:"calcZeroBlock",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!0,inputs:[{name:"_lastTransactionBlock",type:"uint256"},{name:"_balance",type:"uint256"},{name:"_thisBlock",type:"uint256"},{name:"_zeroBlock",type:"uint256"}],name:"calcDecay",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!0,inputs:[],name:"getBlockNumber",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"finishMinting",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"mint",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"mint",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_account",type:"address"}],name:"approveAccount",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_account",type:"address"}],name:"unapproveAccount",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_account",type:"address"}],name:"newAccount",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_lifetime",type:"uint256"}],name:"updateLifetime",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_initialBalance",type:"uint256"}],name:"updateInitialBalance",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_generationPeriod",type:"uint256"}],name:"updateGenerationPeriod",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_generationAmount",type:"uint256"}],name:"updateGenerationAmount",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getGenerationAmount",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"mine",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_newCommunityTaxAccount",type:"address"}],name:"updateCommunityTaxAccount",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_communityTax",type:"uint256"}],name:"updateCommunityTax",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_transactionFee",type:"uint256"}],name:"updateTransactionFee",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_confirm",type:"bool"},{name:"_recoverFunds",type:"address"}],name:"terminateCurrency",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}])),V.getNetwork(V.getNetwork("choice")).contractAddress);const a=e.currentProvider.publicConfigStore._state.selectedAddress;return V.setState("activeAddress",!!a&&a.toLowerCase()),e.currentProvider.publicConfigStore.on("update",(function(){var t=e.currentProvider.publicConfigStore._state.selectedAddress;null==t?(V.setState("activeAddress",!1),Join.draw("logged out")):t!=V.getState("activeAddress")&&(V.setState("activeAddress",t.toLowerCase()),Join.draw("set new address"))})),{status:"set address",message:"set address from Web3 provider"}}return"auth denied"==n.status?n:{status:"web3 provider not found",message:"Could not find a Web3 provider and connect to a wallet address"}})},getContractState:async function(){const e=new Promise(e=>{t.methods.getBlockNumber().call().then(t=>{e(t)})}),n=new Promise(e=>{e("getAccountList not a function")}),a=new Promise(e=>{e("getGameParticipants not a function")}),s=new Promise(e=>{e("getTotalAmount not a function")}),o=new Promise(e=>{e("getLastUsedRandomSeeds not a function")}),i=new Promise(e=>{t.getPastEvents("allEvents",{fromBlock:0,toBlock:"latest"},e=>e?console.error(e):null).then(t=>{e(t.map(e=>({b:e.blockNumber,e:e.event,val:e.returnValues.value/1e6,to:e.returnValues.to,from:e.returnValues.from,all:e})).reverse())})}),r=await Promise.all([e,n,a,s,o,i]);console.log("*** CONTRACT STATUS ***"),console.log("Current Block: ",r[0]),console.log("Contract: ",t._address),console.log("Approved Accounts: ",r[1]),console.log("All Events:",r[5]),console.log("*** CONTRACT STATUS END ***")},getAddressState:async function(a){const s=new Promise(t=>{e.eth.getBalance(a).then(e=>{t(e)})}),o=new Promise(e=>{t.methods.liveBalanceOf(a).call().then(t=>{e(t)})}),i=new Promise(e=>{t.methods.getDetails(a).call().then(t=>{e(t)})}),r=await Promise.all([s,o,i]);return r[0]&&r[1]?{status:"success",message:"Account state successfully retrieved",data:{ethBalance:(c=r[0],Number(c/1e18).toFixed(1)),liveBalance:n(r[1]),tokenBalance:n(r[2]._balance),lastBlock:r[2]._lastBlock,zeroBlock:r[2]._zeroBlock}}:{status:"error",message:"Could not retrieve find account state"};var c},getAddressHistory:async function(e,n){!e&&(e=V.getState("activeAddress")),!n&&(n={fromBlock:0,toBlock:"latest"});const a="0x0000000000000000000000000000000000000000";return(await t.getPastEvents("Transfer",{fromBlock:n.fromBlock,toBlock:n.toBlock},e=>{e&&console.error(e)}).then(e=>e)).reverse().filter(t=>{const n=t.returnValues;return n.from.toLowerCase()==e||n.to.toLowerCase()==e}).map(t=>{const n={};return n.from=t.returnValues.from.toLowerCase(),n.to=t.returnValues.to.toLowerCase(),n.amount=t.returnValues.value,n.from==e&&(n.type="out"),n.to==e&&(n.type="in"),n.to==a&&(n.type="burned"),n.from==a&&(n.type="generated"),n.block=t.blockNumber,n.logIndex=t.logIndex,n.hash=t.transactionHash,n})},setAddressVerification:function(e){console.log("verify:",e),t.methods.newAccount(e).send({from:V.getState("activeAddress"),gas:6001e3}).on("transactionHash",e=>{console.log("Hash: ",e)}).on("error",(function(e){console.log("Error: "+e)})).then((function(e){return console.log("Success: "+JSON.stringify(e)),{status:"success",message:V.i18n("Set account verification")}}))},setEtherTransaction:function(t){const n={from:t.initiatorAddress,to:t.recipientAddress,value:e.utils.toWei(t.amount.toString(),"ether")};return e.eth.sendTransaction(n).once("transactionHash",(function(e){console.log("Hash: "+e)})).once("receipt",(function(e){console.log("Receipt A: "+JSON.stringify(e))})).on("confirmation",(function(e,t){console.log("Confirmation Number: "+JSON.stringify(e)),console.log("Receipt B: "+JSON.stringify(t))})).on("error",(function(e){console.log("Error: "+e)})).then((function(e){return console.log("Success: "+JSON.stringify(e)),Account.drawHeaderBalance(),{status:"success",message:V.i18n("Last transaction was processed")}}))},setTokenTransaction:function(n){const a=e.utils.toChecksumAddress(n.recipientAddress),s=n.initiatorAddress,o=1e6*n.amount;t.methods.transfer(a,o).send({from:s}).once("transactionHash",(function(e){console.log("Hash: "+e)})).once("receipt",(function(e){console.log("Receipt A: "+JSON.stringify(e))})).on("confirmation",(function(e,t){console.log("Confirmation Number: "+JSON.stringify(e)),console.log("Receipt B: "+JSON.stringify(t))})).on("error",(function(e){console.log("Error: "+e)})).then((function(e){return console.log("Success: "+JSON.stringify(e)),{status:"success",message:V.i18n("Last transaction was processed")}}))}}}(),VState=function(){"use strict";const e={};function t(t){return"all"==t?e:e[t]}function n(t,n){e[t]||(e[t]={}),"object"==typeof n?Object.assign(e[t],n):e[t]=n}return{getState:t,setState:n,getNavItem:function(e){if("active"==e){const e=V.castCamelCase(t("menu").activeTitle);return t("navItems")[e]}return t("navItems")[e]},setNavItem:function(e){!Array.isArray(e)&&(e=[e]),e.forEach(e=>{try{const a=20;if(!(e.title.length<=a))throw new Error("Title too long (max "+a+", has "+e.title.length+"): "+e.title);{const a=t("navItems"),s=V.castCamelCase(e.title);if(a&&a[s])throw new Error(e.title+" already set");const o={};o[s]=e,n("navItems",o)}}catch(e){console.log(e)}})},getCookie:function(e){return Cookies.get(e)},setCookie:function(e,t){Cookies.set(e,JSON.stringify(t))}}}(),VInit=function(){const e={socketUse:!0,socketHost:"http://localhost",socketPort:6021,entityLedger:"mongodb socket",chatLedger:"mongodb socket",transactionLedger:"evm",web3Use:!0,mapUse:!0,demoContent:!1},t={choice:"truffle",truffle:{contractAddress:"0xfb8f1f762801e54b300E3679645fBB3571339Bc0",rpc:"http://127.0.0.1:9545"}};return{getSetting:function(t){return e[t]},getNetwork:function(e){return t[e]}}}(),VKey=function(){const e={googlePlaces:"AIzaSyD2MU7foORS25ayBrpV28DoZiHfXoCQvts",mapBox:"pk.eyJ1IjoidmFsdWVpbnN0cnVtZW50IiwiYSI6ImNqbGw3aWYxejB1aTUzcHMxZ2o4ejVuMm8ifQ.9nokF78xbuqVF09cKCvpIw"};return{getApiKey:function(t){return e[t]}}}(),V=function(){"use strict";return{kicksAss:async function(){await VLedger.launch(),Canvas.launch()},setEndpoint:VAction.setEndpoint,getEntity:VEntity.getEntity,setEntity:VEntity.setEntity,getAllEntityData:VEntity.getAllEntityData,getMessage:VMessage.getMessage,setMessage:VMessage.setMessage,getTransaction:VTransaction.getTransaction,setTransaction:VTransaction.setTransaction,castNode:VDom.castNode,cN:VDom.cN,setNode:VDom.setNode,sN:VDom.sN,getNode:VDom.getNode,gN:VDom.gN,setAnimation:VDom.setAnimation,sA:VDom.sA,setStyle:VDom.setStyle,setClick:VDom.setClick,getCss:VDom.getCss,castRemToPixel:VDom.castRemToPixel,castInitials:VHelper.castInitials,castCamelCase:VHelper.castCamelCase,castLinks:VHelper.castLinks,castTime:VHelper.castTime,setPipe:VHelper.setPipe,getTranslation:VHelper.getTranslation,i18n:VHelper.i18n,getIcon:VHelper.getIcon,debug:VDebugHelper.debug,getData:VLedger.getData,setData:VLedger.setData,getState:VState.getState,setState:VState.setState,getNavItem:VState.getNavItem,setNavItem:VState.setNavItem,getCookie:VState.getCookie,setCookie:VState.setCookie,getSetting:VInit.getSetting,getNetwork:VInit.getNetwork,getApiKey:VKey.getApiKey,setActiveAddress:VWeb3.setActiveAddress,getContractState:VWeb3.getContractState,getAddressState:VWeb3.getAddressState,getAddressHistory:VWeb3.getAddressHistory,setAddressVerification:VWeb3.setAddressVerification,setEtherTransaction:VWeb3.setEtherTransaction,setTokenTransaction:VWeb3.setTokenTransaction}}(),Canvas=function(){"use strict";function e(){V.setState("screen",{height:Number(window.innerHeight),width:Number(window.innerWidth)}),V.setState("page",{height:V.getCss("--page-position-peek"),top:V.setPipe(V.getCss,V.castRemToPixel)("--page-position-top"),topSelected:V.setPipe(V.getCss,V.castRemToPixel)("--page-position-top-selected"),peek:V.getCss("--page-position-peek"),closed:V.getCss("--page-position-closed")});const e=V.getState("all");V.setState("page",{topCalc:e.screen.height-e.page.top}),V.setState("page",{topSelectedCalc:e.screen.height-e.page.topSelected}),V.setState("page",{featureCalc:Math.floor(e.screen.height-e.page.topSelected-9*e.screen.width/16)}),V.setState("menu",{activeTitle:!1,isHazed:!1,navTop:V.setPipe(V.getCss,V.castRemToPixel,Number)("--app-nav-top"),navLeft:V.setPipe(V.getCss,Number)("--app-nav-left"),entitiesTop:V.setPipe(V.getCss,Number)("--entities-nav-top"),entitiesLeft:V.setPipe(V.getCss,Number)("--entities-nav-left")})}function t(){V.setNode("head",{tag:"title",html:"VI UI 2020"})}function n(){document.documentElement.style.setProperty("--screen-height",`${window.innerHeight}px`),document.documentElement.style.setProperty("--screen-width",`${window.innerWidth}px`)}function a(){V.setStyle("font-styles",{"@font-face":{"font-family":"IBM Plex Regular",src:"url(assets/font/IBMPlexSans-Regular.ttf) format('truetype')","font-display":"fallback","unicode-range":"U+000-024F"},"@font-face-2":{"font-family":"IBM Plex Medium",src:"url(assets/font/IBMPlexSans-Medium.ttf) format('truetype')","font-display":"fallback","unicode-range":"U+000-024F"},"@font-face-3":{"font-family":"IBM Plex Bold",src:"url(assets/font/IBMPlexSans-Bold.ttf) format('truetype')","font-display":"fallback","unicode-range":"U+000-024F"}})}function s(){const e=CanvasComponents.map(),t=CanvasComponents.haze(),n=CanvasComponents.feature(),a=CanvasComponents.form(),s=CanvasComponents.header(),o=CanvasComponents.balance(),i=CanvasComponents.entities(),r=CanvasComponents.nav(),c=CanvasComponents.back(),l=CanvasComponents.interactions(),u=CanvasComponents.page(),d=CanvasComponents.handle(),p=CanvasComponents.content(),m=CanvasComponents.topSlider(),f=CanvasComponents.listings();return V.setNode(s,[o,i,r,c,l]),V.setNode(p,[m,f]),V.setNode(u,[d,p]),[e,t,n,a,s,u]}function o(e){V.setNode("body",e)}function i(){Feature.launch(),Haze.launch(),Button.launch(),Form.launch(),Join.launch(),Navigation.launch(),Page.launch(),Map.launch(),Google.launch()}function r(){Navigation.draw("nav",{keep:3}),Navigation.draw("entities",{keep:5}),setTimeout(Marketplace.draw,300),V.getSetting("demoContent")&&setTimeout(c,1e3)}function c(){let e=100;DemoContent.mongoArr.forEach(t=>{setTimeout((function(){e+=100,V.setEntity("new entity",t,V.getSetting("entityLedger"))}),e)})}return{launch:function(){V.setPipe(e,t,n,a,s,o,i,r)()}}}(),CanvasComponents=function(){"use strict";return{map:function(){return V.setNode({tag:"map",html:V.setNode({tag:"div",id:"map",classes:"map fixed w-screen",setStyle:{map:{background:"rgba(115,182,230,1)",height:"calc(var(--screen-height) - var(--page-position-closed))","z-index":-1}}})})},haze:function(){return V.setNode({tag:"haze",classes:"haze fixed w-screen hidden",setStyle:{haze:{top:0,height:"45vh"}}})},feature:function(){return V.setNode({tag:"feature",classes:"feature fixed w-screen hidden",setStyle:{feature:{top:"var(--page-position-top-selected)",height:"calc(var(--screen-width) * (9 / 16))"}}})},form:function(){return V.setNode({tag:"form",classes:"plusform fixed w-screen hidden bkg-white",setStyle:{plusform:{"padding-top":"var(--page-position-top-selected)",height:"100%"}}})},balance:function(){return V.setNode({tag:"balance",classes:"balance fixed cursor-pointer txt-anchor-mid",setStyle:{balance:{top:"2px",left:"2px"}}})},entities:function(){return V.setNode({tag:"entities",classes:"entities-nav fixed w-screen overflow-x-scroll"})},nav:function(){return V.setNode({tag:"nav",classes:"app-nav fixed w-screen overflow-x-scroll"})},back:function(){return V.setNode({tag:"back",classes:"back fixed",setStyle:{back:{top:"var(--page-position-top-selected)",left:"11px"}},html:V.setNode({tag:"ul"})})},interactions:function(){return V.setNode({tag:"interactions",classes:"interactions fixed",setStyle:{interactions:{top:"11px",right:0,width:"45%"}},html:V.setNode({tag:"ul",classes:"flex items-center justify-end"})})},handle:function(){return V.setNode({tag:"handle",classes:"handle",setStyle:{handle:{"padding-top":"12px",height:"26px",display:"block"}},html:V.setNode({tag:"div",classes:"handle__bar rounded-full bkg-offblack",setStyle:{handle__bar:{"margin-left":"auto","margin-right":"auto",height:"4px",width:"5%"}}})})},topSlider:function(){return V.setNode({tag:"topslider"})},listings:function(){return V.setNode({tag:"listings"})},header:function(){return V.setNode({tag:"header"})},page:function(){return V.setNode({tag:"page",classes:"page fixed w-screen bkg-white",setStyle:{page:{bottom:0,height:"var(--page-position-peek)"}}})},content:function(){return V.setNode({tag:"content",html:V.setNode({tag:"topcontent"})})}}}(),Feature=function(){"use strict";const e={};function t(e){return{$content:"object"==typeof e?e:e.content?e.content:void 0,fade:e.fade}}function n(t){"out"!=t.fade?("in"==t.fade||t.$content)&&(e.$feature.innerHTML="",V.setNode(e.$feature,t.$content),V.setAnimation("feature","fadeIn")):V.setAnimation("feature","fadeOut")}return{launch:function(){e.$feature=V.getNode("feature")},draw:function(e){V.setPipe(t,n)(e)}}}(),Haze=function(){"use strict";const e={};function t(e){return e}function n(t){const n=V.getState("menu");if(t&&"out"==t.fade)return e.$haze.classList.remove("bkg-white"),e.$haze.classList.remove("bkg-black"),V.setState("menu",{isHazed:!1}),void V.setAnimation(e.$haze,"fadeOut",{delay:.1,duration:1});1!=n.isHazed&&(t&&t.color?"black"==t.color&&(e.$haze.className+=" bkg-black"):e.$haze.className+=" bkg-white",V.setState("menu",{isHazed:!0}),V.setAnimation(e.$haze,"fadeIn",{delay:2,duration:3}))}return{launch:function(){e.$haze=V.getNode("haze")},draw:function(e){V.setPipe(t,n)(e)}}}(),Page=function(){"use strict";const e={};function t(e){return e}function n(t){t&&(0!=t.reset&&(e.$topcontent.innerHTML="",e.$topslider.innerHTML="",e.$listings.innerHTML=""),1!=t.active?(t.topcontent&&V.setNode(e.$topcontent,t.topcontent),t.topslider&&V.setNode(e.$topslider,t.topslider),t.listings&&V.setNode(e.$listings,t.listings),t.position&&s(t.position),t.pos&&s(t.pos)):V.getNavItem("active").draw())}function a(e,t){V.setAnimation(".handle__bar",{width:e+"%"}),V.setAnimation("handle",{height:t+"px"})}function s(t){const n=V.getState("page"),s=function(e){const t=V.getState("page"),n=V.getState("menu");switch(e){case"top":return n.activeTitle?t.topSelectedCalc:t.topCalc;case"feature":return t.featureCalc;case"peek":return t.peek;default:return t.closed}}(t);s!=n.height&&(V.setAnimation(e.$page,{height:s+"px"},{duration:3}).then(()=>{const e=V.getNode("listings > ul");e&&(e.scrollTop=0)}),"top"==t?(Haze.draw(),a(7,19)):"feature"==t?(Haze.draw(),a(7,19)):"closed"==t?(Haze.draw({fade:"out"}),a(5,35)):"peek"==t&&(Haze.draw({fade:"out"}),a(5,25)),V.setState("page",{height:s}))}return{launch:function(){e.$page=V.getNode("page"),e.$topcontent=V.getNode("topcontent"),e.$topslider=V.getNode("topslider"),e.$listings=V.getNode("listings"),function(){const e=V.getNode("handle"),t=V.getNode("topcontent"),n=V.getNode("topslider"),a=V.getNode("listings");function s(e){V.setState("flick",{startX:e.changedTouches[0].clientX}),V.setState("flick",{startY:e.changedTouches[0].clientY})}function o(e){V.setState("flick",{endX:e.changedTouches[0].clientX}),V.setState("flick",{endY:e.changedTouches[0].clientY});const t=V.getNode("listings > ul");let n=!0;t&&t.scrollTop>0&&"listings"==e.currentTarget.localName&&(n=!1);const a=V.getState("page"),s=V.getState("flick");Math.abs(s.startX-s.endX)<100&&s.startY>s.endY+15?a.height==a.peek||a.height==a.featureCalc?Page.draw({position:"top",reset:!1}):a.height==a.closed&&Page.draw({position:"peek",reset:!1}):n&&Math.abs(s.startX-s.endX)<100&&s.startY<s.endY-15&&(a.height==a.peek?(Page.draw({position:"closed",reset:!1}),Navigation.draw("all",{reset:!0})):(a.height==a.featureCalc||a.height>=a.topCalc)&&(Page.draw({position:"peek",reset:!1}),Feature.draw({fade:"out"})))}e.addEventListener("click",(function(){const e=V.getState("page");e.height==e.closed?Page.draw({position:"peek",reset:!1}):e.height==e.peek?Page.draw({position:"top",reset:!1}):(e.height==e.featureCalc||e.height>=e.topCalc)&&(Navigation.draw("all",{reset:!0}),Page.draw({position:"closed",reset:!1}))})),e.addEventListener("touchstart",s),e.addEventListener("touchend",o),t.addEventListener("touchstart",s),t.addEventListener("touchend",o),n.addEventListener("touchstart",s),n.addEventListener("touchend",o),a.addEventListener("touchstart",s),a.addEventListener("touchend",o)}()},draw:function(e){V.setPipe(t,n)(e)}}}(),Button=function(){"use strict";const e={};return{launch:function(){e.$interactionsUL=V.getNode("interactions > ul"),e.$join=V.getNode("body"),function(){const t=InteractionComponents.filter(),n=InteractionComponents.searchBtn(),a=InteractionComponents.plus(),s=InteractionComponents.send(),o=InteractionComponents.close();a.addEventListener("click",(function(){Page.draw({position:"close",reset:!1}),Form.draw(V.getNavItem("active").use.form)})),n.addEventListener("click",(function(){Form.draw("search")})),o.addEventListener("click",(function(){Form.draw("all",{fade:"out"}),Button.draw("all",{fade:"out"}),Button.draw(V.getNavItem("active").use.button,{delay:1.5}),Page.draw({position:"peek",reset:!1})})),s.addEventListener("click",(function(){const e=V.getNavItem("active").role,t=V.getNode("form"),n={title:t.getNode(".plusform__title").value,role:e,location:t.getNode(".plusform__loc").value,lat:t.getNode("#plusform__lat").value||void 0,lng:t.getNode("#plusform__lng").value||void 0,description:t.getNode(".plusform__desc").value,unit:t.getNode(".plusform__unit").value,target:t.getNode(".plusform__target").value};V.setEndpoint("new entity",n).then(e=>{"success"==e.status?(Page.draw({active:!0}),Form.draw({fade:"out"}),Button.draw("all",{fade:"out"}),Button.draw("plus search",{delay:1}),console.log(e.message)):"invalid title"==e.status?(Form.draw({error:"invalid title"}),console.error(e.message)):(Form.draw({error:"check console"}),console.error("try again, because: ",e.message))})})),V.setNode(e.$interactionsUL,[o,a,t,n,s])}()},draw:function(e,t){!function(e){let t="fadeIn",n=.2;e.options&&"out"==e.options.fade&&(t="fadeOut"),e.options&&e.options.delay&&(n=e.options.delay),e.btnArr.forEach(e=>{V.setAnimation("#"+e,t,{delay:n,duration:1})})}(function(e,t){return{btnArr:"all"==e?["filter","search","plus","close","send"]:e.split(" "),options:t}}(e,t))}}}(),InteractionComponents=function(){"use strict";const e="cursor-pointer hidden pr-s",t="w-full m-2 pxy rounded border-blackalpha";function n(e){return V.sN({t:"div",s:{"circle-1":{width:"2.5rem",height:"2.5rem"}},c:"circle-1 flex justify-center items-center rounded-full border-blackalpha bkg-white",h:V.getIcon(e)})}function a(){V.setNode(".modal","clear")}return{filter:function(){return V.sN({t:"li",id:"filter",c:e,h:n("filter_list")})},searchBtn:function(){return V.sN({t:"li",id:"search",c:e,h:n("search")})},plus:function(){return V.sN({t:"li",id:"plus",c:e,h:n("+")})},send:function(){return V.sN({t:"li",id:"send",c:e,h:n("send")})},close:function(){return V.sN({t:"li",id:"close",c:e,h:n("close")})},form:function(){return V.sN({t:"form",c:"pxy"})},searchForm:function(){return V.sN({t:"input",c:t,a:{placeholder:V.i18n("Search")}})},joinForm:function(){return V.sN({t:"input",c:t,a:{placeholder:V.i18n("Your preferred name")}})},title:function(){return V.sN({t:"input",c:"plusform__title "+t,a:{placeholder:V.i18n("Title")}})},loc:function(){return V.sN({t:"input",i:"plusform__loc",c:"plusform__loc "+t,a:{placeholder:V.i18n("Location")}})},locLat:function(){return V.sN({t:"input",i:"plusform__lat",a:{type:"hidden",step:"0.00001"}})},locLng:function(){return V.sN({t:"input",i:"plusform__lng",a:{type:"hidden",step:"0.00001"}})},desc:function(){return V.sN({t:"textarea",c:"plusform__desc "+t,a:{placeholder:V.i18n("Description")}})},target:function(){return V.sN({t:"input",c:"plusform__target w-1/3 m-2 mr-2 pxy rounded border-blackalpha",a:{placeholder:V.i18n("Price")}})},unit:function(){return V.sN({t:"input",c:"plusform__unit w-1/3 m-2 pxy rounded border-blackalpha",a:{placeholder:V.i18n("Unit")}})},joinBtn:function(){return V.sN({t:"join",c:"balance fixed cursor-pointer txt-anchor-mid",h:V.setNode({tag:"a",href:"#modal",html:'<svg width="54px" viewBox="0 0 36 36">\n                <circle stroke-dasharray="100" transform ="rotate(-90, 18, 18) translate(0, 36) scale(1, -1)"\n                       stroke-dashoffset="-200" cx="18" cy="18" r="15.91549430918954" fill="#ffa41b"\n                       stroke="#ffa41b" stroke-width="2.7">\n                </circle>\n                <text class="font-medium fs-xs" x="50%" y="59%">Join</text>\n              </svg>'})})},modal:function(){return V.cN({t:"modal",c:"modal fixed",h:V.cN({t:"div",c:"modal__close",h:V.i18n("Close"),click:a}),click:a})}}}(),Form=function(){"use strict";const e={};return{launch:function(){e.$form=V.getNode("form")},draw:function(t,n){var a;(a=function(e,t){if(t&&"out"==t.fade)return{fadeOut:!0};if(t&&"invalid title"==t.error)return{error:"invalid title"};const n=InteractionComponents.form();return"new entity"==e?V.setNode(n,[InteractionComponents.title(),InteractionComponents.loc(),InteractionComponents.desc(),InteractionComponents.target(),InteractionComponents.unit(),InteractionComponents.locLat(),InteractionComponents.locLng()]):"search"==e?V.setNode(n,InteractionComponents.searchForm()):V.setNode(n,[InteractionComponents.title(),InteractionComponents.desc()]),{layout:e,$form:n}}(t,n)).fadeOut?(e.$form.innerHTML="",V.setAnimation(e.$form,"fadeOut",{delay:.2,duration:1})):"invalid title"==a.error?(e.$formtitle=V.getNode(".plusform__title"),e.$formtitle.setAttribute("placeholder",V.i18n("Please choose another title")),e.$formtitle.value="",e.$formtitle.className+=" border-error"):(V.setNode(e.$form,a.$form),V.setAnimation(e.$form,"fadeIn",{delay:.2,duration:1}),Google.initAutocomplete("plusform"),Button.draw("all",{fade:"out"}),Button.draw("search"==a.layout?"close search":"close send",{delay:1}))}}}(),Join=function(){"use strict";async function e(){const e=V.getState("activeAddress");return e?V.getEntity("by ethAddress",e).then(e=>e.data.length?(V.setState("activeEntity",e.data[0]),"entity found"):"entity not found"):"error"}return{launch:function(){if(!V.gN("join")){V.sN("balance > svg","clear");const e=InteractionComponents.joinBtn();e.addEventListener("click",(function(){Join.draw("launch")})),V.sN("header",e)}},draw:function(t){(async function(t){return"launch"==t&&V.getSetting("web3Use")?await V.setActiveAddress().then(async n=>{"set address"==n.status?(V.getContractState(),t=await e()):t=n.status}):"set new address"==t&&(t=await e()),t})(t).then(e=>{!function(e){"entity found"==e?(Account.drawHeaderBalance(),Marketplace.draw(),Modal.draw(e)):"logged out"==e?(Join.launch(),Marketplace.draw(),Modal.draw(e)):Modal.draw(e)}(e)})}}}(),Modal=function(){"use strict";const e={};return{draw:function(e){(async function(e){const t=InteractionComponents.modal();let n="An unknown error occured";if("entity found"==e){const e=await V.getAllEntityData();n=`<p class="modal__welcome-back">\n      ${V.i18n("Welcome back")}, ${e.name}<br>\n      ${V.i18n("ETH")}: ${e.ethBalance}<br>\n      ${V.i18n("V")}: ${e.tokenBalance}<br>\n      ${V.i18n("V Live")}: ${e.liveBalance}<br>\n      ${V.i18n("Last Block")}: ${e.lastBlock}<br>\n      ${V.i18n("Zero Block")}: ${e.zeroBlock}<br>\n\n      </p>`}if("entity new"==e){const e=await V.getAllEntityData();n=`<p class="modal__welcome-back">${V.i18n("Welcome")}, ${e.name}<br>${V.i18n("ETH")}: ${e.ethBalance}<br>${V.i18n("V")}: ${e.tokenBalance}</p>`}else"entity not found"==e?(V.sN("balance > svg","clear"),Join.launch(),n=`<div class="modal__new font-medium" onclick="event.stopPropagation(); V.sN('.modal__new', 'clear'); Modal.drawNameForm()">${V.i18n("Name your account")}</div><p class="modal__new-name">${V.i18n("Naming your account creates a new entity for your address. An entity can be anything you want to make visible in the network.")}</p>`):"auth denied"==e?n=`<p class="modal__p">${V.i18n("Authorization denied")}</p>`:"wallet locked"==e?n=`<p class="modal__p">${V.i18n("Please connect your wallet. No sensitive data is being shared with anyone else. Only your public address will be used to retrieve your profile.")}</p>`:"logged out"==e?n=`<p class="modal__p">${V.i18n("You are logged out")}</p>`:"web3 provider not found"==e&&(n=`<div class="modal__new font-medium">${V.i18n("Create new wallet")}</div><p class="modal__return">${V.i18n("Recover from mnemonic phrase")} (${V.i18n("A Web3 provider was not found")})</p>`);return V.setNode(t,{t:"div",c:"modal__content",h:n}),t})(e).then(e=>{!function(e){V.setNode(".modal","clear"),V.setNode("body",e)}(e)})},drawNameForm:function(t){if("clear"==t)return V.setNode(".messagebox","clear");const n=V.sN({t:"div",s:{messagebox:{position:"absolute",top:"7vh"}},c:"messagebox flex w-100"}),a=V.sN({t:"input",a:{placeholder:V.i18n("Choose preferred name")},s:{messagebox__input:{height:"36px",padding:"8px 15px","min-width":"100px",border:"1px solid #e8e8ec",resize:"none","border-radius":"30px"}},c:"messagebox__input mr-2"}),s=V.sN({t:"button",s:{"circle-1":{width:"2.5rem",height:"2.5rem"}},c:"circle-1 flex justify-center items-center rounded-full border-blackalpha bkg-white",h:V.getIcon("send")});a.addEventListener("click",(function(e){e.stopPropagation()})),s.addEventListener("click",(function(t){t.stopPropagation(),e.$box=V.getNode(".messagebox__input");const n={title:e.$box.value,role:"member",ethAddress:V.getState("activeAddress")};V.setEndpoint("new entity",n).then(t=>{"success"==t.status?(console.log(t.message),Modal.draw("entity new"),Account.drawHeaderBalance()):(e.$box.value="",e.$box.setAttribute("placeholder",V.i18n(t.message)),console.error("try again, because: ",t.message))})})),V.setNode(n,[a,s]),V.setNode(".modal__content",n)}}}(),NavComponents=function(){"use strict";return{pill:function(e){const t=e.o?'<svg class="pill--user-online txt-green" xmlns="http://www.w3.org/2000/svg" height="15" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v1c0 .55.45 1 1 1h14c.55 0 1-.45 1-1v-1c0-2.66-5.33-4-8-4z"/></svg>':"";return V.setNode({tag:"li",classes:"pill flex justify-center items-center rounded-full bkg-white pill-shadow cursor-pointer no-txt-select",setStyle:{pill:{height:"2.5rem",padding:"0 1.2rem","margin-right":"0.7rem"},"pill--selected":{color:"rgba(var(--brand), 1)",border:"2px solid rgba(var(--brand), 1)","box-shadow":"0px -1px 3px 0px rgba(var(--brand),.50), 0px 1px 3px 0px rgba(var(--brand),.55)"},"pill--user-online":{position:"relative",left:"-3px"}},attributes:{idfy:e.id},html:t+e.title})},entitiesUl:function(){return V.setNode({tag:"ul",classes:"entities-nav__ul flex items-center font-medium fs-rr",setStyle:{"entities-nav":{"padding-top":"4px","padding-bottom":"8px",top:"var(--entities-nav-top)",left:"var(--entities-nav-left)"},"entities-nav__ul":{width:"1000px","padding-left":"3px"}}})},navUl:function(){return V.setNode({tag:"ul",classes:"app-nav__ul flex items-center font-medium",setStyle:{"app-nav":{"padding-top":"4px","padding-bottom":"28px",top:"var(--app-nav-top)",left:"var(--app-nav-left)"},"app-nav__ul":{width:"1000px","padding-left":"3px"}}})}}}(),Navigation=function(){"use strict";const e={};function t(t){t.reset?a():(t.ul.addEventListener("click",(function(e){e.stopPropagation();const t=(e=>{const t=e.target;return"li"==t.localName?t:"svg"==t.localName?t.parentNode:"path"==t.localName?t.parentNode.parentNode:void 0})(e);if(t){const e=V.getState("menu"),a=t.parentNode.parentNode.localName,s=t.getBoundingClientRect(),o="nav"==a?"entities":"nav";!function(e){e.className+=" pill--selected",e.addEventListener("click",n,{once:!0}),V.setState("menu",{activeTitle:e.innerHTML})}(t),function(e,t,n,a){let s=" absolute font-medium";t.getAttribute("idfy")>1e3&&(s+=" fs-rr");const o=t.cloneNode(!0);o.className+=s,o.style.left=n.left+"px",o.style.top=n.top+"px",V.getNode("body").appendChild(o),V.setAnimation(o,{top:a.entitiesTop+4,left:a.entitiesLeft+3},{duration:2}).then(()=>{t.style.visibility="visible",o.remove()}),t.style.visibility="hidden",V.getNode(e+" > ul").prepend(t)}(a,t,s,e),V.sA(o,{height:0,width:0},{duration:1}),V.setAnimation(a,{width:s.width+11,top:e.entitiesTop,left:e.entitiesLeft},{duration:1}),V.getNode(a).scrollLeft=0,function(e){e.getAttribute("idfy")>1e3?(Chat.draw(),Button.draw("search")):(Page.draw({active:!0}),Button.draw(V.getNavItem("active").use.button,{delay:2}))}(t),setTimeout(()=>(function(e){const t=V.getNode(e+" > ul").childNodes,n=JSON.parse(V.getCookie(e+"-state"));for(let e=0;e<t.length;e++){const a=t[e];for(let t=0;t<n.length;t++)if(n[t].title==a.innerHTML){a.classList.contains("pill--selected")&&(n[t].c+=1),n[t].l=e;break}}V.setCookie(e+"-state",n)})(a),1e3)}})),"entities"==t.row?V.setNode(e.$entities,t.ul):"nav"==t.row&&V.setNode(e.$nav,t.ul))}function n(e){e.stopPropagation(),a(),Page.draw({position:"closed",reset:!1})}function a(){const e=V.getState("menu"),t=window.innerWidth;!function(){const e=document.getElementsByClassName("pill--selected");e.length&&(e[0].removeEventListener("click",n),e[0].classList.remove("pill--selected"),V.setState("menu",{activeTitle:!1}))}(),V.getNode("entities").scrollLeft=0,V.getNode("nav").scrollLeft=0,V.setAnimation("entities",{height:48,width:t},{duration:1}),V.setAnimation("nav",{height:48,width:t,top:e.navTop,left:e.navLeft},{duration:2}),Feature.draw({fade:"out"}),Haze.draw({fade:"out"}),Form.draw("all",{fade:"out"}),Button.draw("all",{fade:"out"}),Chat.drawMessageBox("clear")}return{launch:function(){e.$nav=V.getNode("nav"),e.$entities=V.getNode("entities"),function(){const e=V.getCookie("nav-state"),t=Object.values(V.getState("navItems"));e&&JSON.parse(e).length==t.length||V.setCookie("nav-state",t);const n=V.getCookie("entities-state"),a=DemoContent.entitiesNavArr;n&&JSON.parse(n).length==a.length||V.setCookie("entities-state",a)}()},draw:function(e,n){t(function(e,t){if(t.reset)return{reset:!0};const n=JSON.parse(V.getCookie(e+"-state"));let a;"entities"==e?a=NavComponents.entitiesUl():"nav"==e&&(a=NavComponents.navUl());const s=n.sort((function(e,t){return e.l-t.l})),o=s.slice(t.keep).sort((function(e,t){return t.c-e.c})),i=s.slice(0).splice(0,t.keep).concat(o);for(let e=0;e<i.length;e++){const t=NavComponents.pill(i[e]);V.setNode(a,t)}return{row:e,ul:a}}(e,n))}}}(),Account=function(){"use strict";return{draw:function(e){(async function(){const e=V.getState("page");if(e.height!=e.topCalc){const e=await V.getAddressHistory(),t=AccountComponents.listingsUl();for(const n of e){if("in"==n.type){const e=await V.getEntity("by ethAddress",n.from);n.title=e.data[0].fullId}else if("out"==n.type){const e=await V.getEntity("by ethAddress",n.to);n.title=e.data[0].fullId}else"burned"==n.type?n.title="Burn Account":"generated"==n.type?n.title="Community Payout":n.title="Unknown";const e=AccountComponents.accountCard(n);V.setNode(t,e)}return{topcontent:V.cN({tag:"p",class:"pxy fs-xl font-bold txt-center",html:"Account of "+V.getState("activeEntity").fullId}),listings:t,position:"top"}}})().then(e=>{!function(e){e?(Navigation.draw("all",{reset:!0}),Page.draw(e)):Marketplace.draw()}(e)})},drawHeaderBalance:function(e){V.getAllEntityData().then(t=>{const n=AccountComponents.headerBalance(t,e);V.setNode("join","clear"),V.setNode("balance > svg","clear"),setTimeout(()=>V.setNode("balance",n),700)})}}}(),AccountComponents=function(){"use strict";return{headerBalance:function(e,t){return V.castNode({tag:"svg",html:`<svg width="54px" viewBox="0 0 36 36">\n              <circle stroke-dasharray="100" transform ="rotate(-90, 18, 18) translate(0, 36) scale(1, -1)" stroke-dashoffset="-200" cx="18" cy="18" r="15.91549430918954" fill="white" stroke="#1b1aff" stroke-width="2.7"></circle>\n              <text class="font-medium fs-xxs txt-green" x="50%" y="59%">${e[t||"liveBalance"]}</text>\n            </svg>`,click:function(){Account.draw()}})},accountBalance:function(){return V.castNode({tag:"li",class:"txt-anchor-mid",html:'<svg width="74px" viewBox="0 0 36 36"><circle stroke-dasharray="100" transform ="rotate(-90, 18, 18) translate(0, 36) scale(1, -1)" stroke-dashoffset="-200" cx="18" cy="18" r="15.91549430918954" fill="white" stroke="#1b1aff" stroke-width="2.7"></circle><text class="font-medium fs-xxs txt-green" x="50%" y="59%">3129</text></svg>'})},accountSmallCard:function(e,t){return V.castNode({tag:"li",setStyle:{"circle-2":{width:"3.5rem",height:"3.5rem"}},classes:"pxy txt-center",html:'<div class="smallcard__container font-medium pxy"><p class="font-medium pb-xs">'+e+'</p><div class="flex justify-center items-center circle-2 rounded-full border-blackalpha font-medium no-txt-select">'+t[e]+"</div></div>"})},accountCard:function(e){let t="";switch(e.type){case"in":t="#B4ECB4";break;case"out":t="#ffa41b";break;case"burned":t="lightblue";break;case"generated":t="green";break;default:t="gray"}return V.castNode({tag:"li",setStyle:{"circle-3":{width:"4.5rem",height:"4.5rem"}},classes:"pxy w-screen",html:'<card class="flex card-shadow rounded bkg-white pxy"><div class="circle-3 pxy rounded-full flex justify-center items-center" style="background: '+t+';"><div class="card__initials font-medium fs-xl txt-white">'+(e.amount/1e6).toFixed(1)+'</div></div><div class="pxy"><h2 class="font-bold fs-l leading-snug">'+e.title+"</h2><p>To "+e.to.substr(0,4)+" ... "+e.to.substr(e.to.length-4)+"</p><p>From "+e.from.substr(0,4)+" ... "+e.from.substr(e.from.length-4)+"</p><p>Block "+e.block+"</p></div></card>"})},topSliderUl:function(){return V.castNode({tag:"ul",classes:"flex overflow-x-scroll"})},listingsUl:function(){return V.castNode({tag:"ul",classes:"listings__ul flex flex-wrap justify-evenly overflow-y-scroll content-start",setStyle:{listings__ul:{height:"530px"}}})}}}(),Chat=function(){"use strict";const e={},t=V.i18n("Send message or funds");function n(){const e=ChatComponents.topSliderUl(),t=ChatComponents.listingsUl();for(const t in DemoContent.chatData){const n=ChatComponents.chatSmallCard(t,DemoContent.chatData);V.setNode(e,n)}DemoContent.chatsArr.forEach(e=>{const n=ChatComponents.message(e);V.setNode(t,n)});const n=ChatComponents.message({sender:"Me",msg:"You've sent 560 V to Sheela Anand #3565"});return V.setNode(t,n),{topslider:V.sN({t:"h2",c:"font-bold fs-l leading-snug txt-center w-screen pxy",h:"Conversation with Sheela Anand #3565"}),listings:t,position:"top"}}function a(e){Page.draw(e),Chat.drawMessageBox()}return{draw:function(e){V.setPipe(n,a)(e)},drawMessageBox:function(n){if("clear"==n)return V.setNode(".messagebox","clear");const a=V.sN({t:"div",s:{messagebox:{bottom:"0","border-top":"1px solid #e8e8ec",background:"#d1d2da",padding:"8px 5px"}},c:"messagebox flex fixed pxy w-full bkg-white card-shadow"}),s=V.sN({t:"textarea",h:"send Expert In Nodejs #2121 100",a:{placeholder:t},s:{messagebox__input:{height:"36px",padding:"8px 15px","min-width":"302px",border:"1px solid #e8e8ec",resize:"none","border-radius":"30px"}},c:"messagebox__input mr-2"}),o=V.sN({t:"button",s:{"circle-1":{width:"2.5rem",height:"2.5rem"}},c:"circle-1 flex justify-center items-center rounded-full border-blackalpha bkg-white",h:V.getIcon("send")});o.addEventListener("click",(function(){e.$box=V.getNode(".messagebox__input");const t=e.$box.value;V.setEndpoint("new message",t).then(t=>{console.log("res: ",t),"success"==t.status?(Account.drawHeaderBalance(),e.$box.value="",e.$box.setAttribute("placeholder",V.i18n(t.message)),console.log(t.message)):(e.$box.value="",e.$box.setAttribute("placeholder",V.i18n(t.message)),console.error("try again, because: ",t.message))})})),V.setNode(a,[s,o]),V.setNode("body",a)}}}(),ChatComponents=function(){"use strict";return{chatSmallCard:function(e,t){return V.castNode({tag:"li",setStyle:{"circle-2":{width:"3.5rem",height:"3.5rem"}},classes:"pxy",html:'<div class="smallcard__container font-medium pxy"><p class="font-medium pb-xs">'+e+'</p><div class="flex justify-center items-center circle-2 rounded-full border-blackalpha font-medium no-txt-select">'+t[e]+"</div></div>"})},message:function(e){const t=e.msg.length>70?"300px":e.msg.length<30?"220px":"245px",n="Me"==e.sender?e.msg.match("You've sent")?"#c0d6b9":"#e0e7eb":"#f7f7f8",a="Me"==e.sender?{"margin-left":"auto",width:t}:{width:t};return V.castNode({tag:"li",classes:"w-screen pxy",s:a,html:'<message style="background:'+n+'" class="message__container flex card-shadow rounded bkg-white pxy"><div class="font-medium pxy">'+("Me"==e.sender?"":"<p>"+e.sender+"</p>")+"<p>"+e.msg+"</p></div></message>"})},topSliderUl:function(){return V.castNode({tag:"ul",classes:"flex overflow-x-scroll"})},listingsUl:function(){return V.castNode({tag:"ul",classes:"listings__ul flex flex-wrap content-start overflow-y-scroll",setStyle:{listings__ul:{height:"530px"}}})}}}(),DataComponents=function(){"use strict";return{weatherCard:function(e,t){return V.setNode({tag:"li",classes:"pxy",setStyle:{icon:{height:"80px",position:"relative",bottom:"3px",left:"2px"},forecast:{width:"57px","text-align":"-moz-center"},"circle-2":{width:"3.5rem",height:"3.5rem"},"circle-3":{width:"4.5rem",height:"4.5rem"},card__container:{height:"var(--card-height)","max-width":"360px","flex-wrap":"wrap"},"card__top-left":{width:"25%"},"card__bottom-left":{display:"grid","justify-items":"center","text-align":"center",width:"25%"},"card__top-right":{width:"69%"},"card__bottom-right":{width:"69%"},card__unit:{width:"100%"}},html:'<card class="card__container flex card-shadow rounded bkg-white pxy"><div class="card__top-left flex justify-center items-center"><div class="circle-3 flex justify-center items-center rounded-full" style="background: antiquewhite; background-position: center center; background-size: cover;"><div class="card__initials font-bold fs-xxl txt-white"><img src="'+e.iconUrl+'"></div></div></div><div class="card__top-right flex items-center pxy"><h2 class="font-bold fs-l leading-snug">'+e.place+'</h2></div><div class="card__bottom-left items-center"><div class="circle-2 flex justify-center items-center rounded-full border-blackalpha font-medium no-txt-select">'+e.tempC+'</div><p class="card__unit fs-xxs">Now</p></div><div class="card__bottom-right pxy"><div class="flex justify-center items-center"><div class="forecast"><div style="background: antiquewhite;" class="circle-2 flex justify-center items-center rounded-full"><div><img class="icon" src="'+t.iconUrl.hr24+'"></div></div><p class="card__unit fs-xxs">'+t.tempC.hr24+'</p><p class="card__unit fs-xxs">Tomorrow</p></div><div class="forecast"><div style="background: antiquewhite;" class="circle-2 flex justify-center items-center rounded-full"><div><img class="icon" src="'+t.iconUrl.hr48+'"></div></div><p class="card__unit fs-xxs">'+t.tempC.hr48+'</p><p class="card__unit fs-xxs">'+t.date.hr48+'</p></div><div class="forecast"><div style="background: antiquewhite;" class="circle-2 flex justify-center items-center rounded-full"><div><img class="icon" src="'+t.iconUrl.hr72+'"></div></div><p class="card__unit fs-xxs">'+t.tempC.hr72+'</p><p class="card__unit fs-xxs">'+t.date.hr72+'</p></div><div class="forecast"><div style="background: antiquewhite;" class="circle-2 flex justify-center items-center rounded-full"><div><img class="icon" src="'+t.iconUrl.hr96+'"></div></div><p class="card__unit fs-xxs">'+t.tempC.hr96+'</p><p class="card__unit fs-xxs">'+t.date.hr96+"</p></div></div></div></card>"})},airCard:function(e){const t="#00E400",n="#FFFF00",a="#FF7E00",s="#FF0000",o="rgb(143, 63, 151)",i="#7E0023",r="Good",c="Moderate",l="Unhealthy for Sensitive Groups",u="Unhealthy",d="Very Unhealthy",p="Hazardous",m=e=>e<=50?{c:t,h:r}:e<=100?{c:n,h:c}:e<=150?{c:a,h:l}:e<=200?{c:s,h:u}:e<=300?{c:o,h:d}:e<=500?{c:i,h:p}:void 0;return V.setNode({tag:"li",classes:"pxy",setStyle:{icon:{height:"80px",position:"relative",bottom:"3px",left:"2px"},forecast:{width:"57px","text-align":"-moz-center"},"circle-2":{width:"3.5rem",height:"3.5rem"},"circle-3":{width:"4.5rem",height:"4.5rem"},card__container:{height:"var(--card-height)","max-width":"360px","flex-wrap":"wrap"},"card__top-left":{width:"25%"},"card__bottom-left":{display:"grid","justify-items":"center","text-align":"center",width:"25%"},"card__top-right":{width:"69%"},"card__bottom-right":{width:"69%"},card__unit:{width:"100%"}},html:'<card class="card__container flex card-shadow rounded bkg-white pxy"><div class="card__top-left flex justify-center items-center"><div class="circle-2 flex justify-center items-center rounded-full" style="background-color: '+m(e.pollution.aqius).c+';background-position: center center; background-size: cover;"></div></div><div class="card__top-right flex items-center pxy"><h2 class="font-bold fs-l leading-snug">'+e.city+'</h2></div><div class="card__bottom-left items-center"><div class="circle-2 flex justify-center items-center rounded-full border-blackalpha font-medium no-txt-select">'+e.pollution.aqius+'</div><p class="card__unit fs-xxs">US AQI</p></div><div class="card__bottom-right pxy"><p>'+m(e.pollution.aqius).h+"</p></div></card>"})},listingsUl:function(){return V.setNode({tag:"ul",classes:"listings__ul flex flex-wrap content-start justify-evenly overflow-y-scroll",setStyle:{listings__ul:{height:"530px"}}})}}}(),Data=function(){"use strict";return V.setNavItem([{title:"Data",role:"data",use:{button:"search",form:"new entity"},draw:function(){Data.draw()}}]),{draw:function(e){(async function(e){const t=V.getState("map"),n=Promise.resolve(V.getData("https://api.openweathermap.org/data/2.5/weather?lat="+t.lat.toFixed(4)+"&lon="+t.lng.toFixed(4)+"&appid=8cc2a6452c40044763dd503c9752fbdc","","http")),a=Promise.resolve(V.getData("https://api.openweathermap.org/data/2.5/forecast?lat="+t.lat.toFixed(4)+"&lon="+t.lng.toFixed(4)+"&appid=8cc2a6452c40044763dd503c9752fbdc","","http")),s=await Promise.all([{status:"fail"},n,a]),o=s[0],i=s[1],r=s[2];let c={city:"Sorry, could not get data",pollution:0};o&&"fail"!=o.status&&(c={city:"The current air pollution levels in "+o.data.city+"!",pollution:o.data.current.pollution});const l={place:"The weather in "+(""==i.name?"current map position":i.name)+"!",iconUrl:"http://openweathermap.org/img/wn/"+i.weather[0].icon+"@2x.png",temp:"Temperature: "+(i.main.temp-273.15).toFixed(1)+"°C / "+(9*(i.main.temp-273.15)/5+32).toFixed(1)+"°F",tempC:(i.main.temp-273.15).toFixed(0)+"°C",humidity:"Humidity: "+i.main.humidity,sky:i.weather[0].description,sunrise:'Sunrise: <object type="image/svg+xml" data="001-sunrise.svg"></object>'+new Date(i.sys.sunrise),sunset:"Sunset: "+new Date(i.sys.sunset)},u={date:{hr24:V.castTime(1e3*r.list[8].dt,"D MMM"),hr48:V.castTime(1e3*r.list[16].dt,"D MMM"),hr72:V.castTime(1e3*r.list[24].dt,"D MMM"),hr96:V.castTime(1e3*r.list[32].dt,"D MMM")},tempC:{hr24:(r.list[8].main.temp-273.15).toFixed(0)+"°C",hr48:(r.list[16].main.temp-273.15).toFixed(0)+"°C",hr72:(r.list[24].main.temp-273.15).toFixed(0)+"°C",hr96:(r.list[32].main.temp-273.15).toFixed(0)+"°C"},iconUrl:{hr24:"http://openweathermap.org/img/wn/"+r.list[8].weather[0].icon+"@2x.png",hr48:"http://openweathermap.org/img/wn/"+r.list[16].weather[0].icon+"@2x.png",hr72:"http://openweathermap.org/img/wn/"+r.list[24].weather[0].icon+"@2x.png",hr96:"http://openweathermap.org/img/wn/"+r.list[32].weather[0].icon+"@2x.png"}},d=DataComponents.listingsUl(),p=DataComponents.weatherCard(l,u);return V.setNode(d,p),{listings:d,position:"top"}})().then(e=>{!function(e){Page.draw(e)}(e)})}}}(),Google=function(){"use strict";const e=V.getApiKey("googlePlaces");function t(e){return e}function n(){}return{initAutocomplete:function(e){if(document.getElementById(e+"__lat")){const t=new google.maps.places.Autocomplete(document.getElementById(e+"__loc"),{types:["geocode"]});t.addListener("place_changed",(function(){var n=t.getPlace();document.getElementById(e+"__lat").value=n.geometry.location.lat().toFixed(5),document.getElementById(e+"__lng").value=n.geometry.location.lng().toFixed(5)}))}},launch:function(){V.sN("head",{t:"script",a:{src:"https://maps.googleapis.com/maps/api/js?key="+e+"&libraries=places&language=en&region=US"}})},draw:function(e){V.setPipe(t,n)(e)}}}(),Map=function(){"use strict";const e="https://server.arcgisonline.com/ArcGIS/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}",t='&copy; <a href="https://openstreetmap.org/copyright">OpenStreetMap contributors</a>';let n,a;const s={radius:7,fillColor:"#1b1aff",weight:0,opacity:1,fillOpacity:.8};return{launch:function(){V.getSetting("mapUse")&&V.sN("head",{t:"script",a:{src:"dist/leaflet.js",onload:"Map.setMap()"}})},setMap:function(){a=L.geoJSON();const s=V.getCookie("map");if(s){const e=JSON.parse(s);n=L.map("map").setView([e.lat,e.lng],e.zoom),V.setState("map",{lat:e.lat,lng:e.lng,zoom:e.zoom})}else n=L.map("map").setView([52.522,13.383],12),V.setState("map",{lat:52.522,lng:13.383,zoom:12});L.tileLayer(e,{attribution:t,maxZoom:16,minZoom:2,id:"mapbox.streets",accessToken:"your.mapbox.access.token"}).addTo(n),n.on("moveend",(function(){const e=n.getBounds().getCenter();Object.assign(e,{zoom:n.getZoom()}),V.setState("map",e),V.setCookie("map",e)}))},draw:function(e){var t;V.getSetting("mapUse")&&(t=e,Promise.resolve(t)).then(e=>{!function(e){a.remove(),a=L.geoJSON(e,{pointToLayer:function(e,t){return L.circleMarker(t,s)}}),a.addTo(n)}(e)})}}}(),MarketplaceComponents=function(){"use strict";const e=["#d1d2da","#3a0088","#930077","#e61c5d","#ffbd39"],t=t=>{if(null!=t.image)return"url('"+t.image+"')";switch(t.credentials.tag.charAt(1)){case"2":case"3":case"5":case"6":case"8":case"9":return e[0]}},n=e=>null!=e.image?"":V.castInitials(e.credentials.name);return{entitiesSmallCard:function(e){return V.castNode({tag:"li",setStyle:".circle-3 {\n          width: 4.5rem;\n          height: 4.5rem\n        }",classes:"pxy",html:`<smallcard class="smallcard__container flex rounded bkg-white pxy">\n              <a href="#" target="_blank">\n                <div class="circle-3 rounded-full flex justify-center items-center" style="background:${t(e)}; background-position: center center; background-size: cover;">\n                  <div class="card__initials font-bold fs-xxl txt-white">${n(e)}</div>\n                </div>\n              </a>\n            </smallcard>`})},entitiesCard:function(e){return V.castNode({tag:"li",classes:"pxy",setStyle:{"circle-2":{width:"3.5rem",height:"3.5rem"},"circle-3":{width:"4.5rem",height:"4.5rem"},card__container:{height:"var(--card-height)","max-width":"360px","flex-wrap":"wrap"},"card__top-left":{width:"25%"},"card__bottom-left":{display:"grid","justify-items":"center","text-align":"center",width:"25%"},"card__top-right":{width:"69%"},"card__bottom-right":{width:"69%"},card__unit:{width:"100%"}},html:`<card class="card__container flex card-shadow rounded bkg-white pxy">\n              <div class="card__top-left flex justify-center items-center">\n                <div class="circle-3 flex justify-center items-center rounded-full"\n                     style="background: ${t(e)}; background-position: center center; background-size: cover;">\n                  <div class="card__initials font-bold fs-xxl txt-white">${n(e)}</div>\n                </div>\n              </div>\n              <div class="card__top-right flex items-center pxy">\n                <h2 class="font-bold fs-l leading-snug">${e.fullId}</h2>\n              </div>\n              <div class="card__bottom-left items-center">\n                <div class="circle-2 flex justify-center items-center rounded-full border-blackalpha font-medium no-txt-select">${0==e.properties.target?"free":e.properties.target}</div>\n                <p class="card__unit fs-xxs"> V per ${"free"==e.properties.unit?"":e.properties.unit}</p>\n              </div>\n              <div class="card__bottom-right pxy">\n                <p>${e.properties.description}</p>\n                <p>in ${e.properties.location}</p>\n              </div>\n            </card>`})},topSliderUl:function(){return V.castNode({tag:"ul",classes:"flex overflow-x-scroll"})},listingsUl:function(){return V.castNode({tag:"ul",classes:"listings__ul flex flex-wrap content-start justify-evenly overflow-y-scroll",setStyle:{listings__ul:{height:"530px"}}})}}}(),Marketplace=function(){"use strict";return V.setNavItem([{title:"Marketplace",use:{button:"search"},draw:function(){Marketplace.draw()}},{title:"Jobs",role:"job",use:{button:"plus search",form:"new entity"},draw:function(){Marketplace.draw({role:"job"})}},{title:"Skills",role:"skill",use:{button:"plus search",form:"new entity"},draw:function(){Marketplace.draw({role:"skill"})}},{title:"Events",role:"event",use:{button:"plus search",form:"new entity"},draw:function(){Marketplace.draw({role:"event"})}}]),{draw:function(e){(async function(e){const t=[],n=MarketplaceComponents.topSliderUl(),a=MarketplaceComponents.listingsUl(),s=await V.getEntity("by role",e);return s.data?s.data.reverse().forEach(e=>{t.push({type:"Feature",geometry:e.geometry});const s=MarketplaceComponents.entitiesSmallCard(e),o=MarketplaceComponents.entitiesCard(e);V.setNode(n,s),V.setNode(a,o)}):V.setNode(n,{t:"p",h:"No entities found"}),{mapData:t,pageData:{topslider:n,listings:a,position:"peek"}}})(e).then(e=>{!function(e){Page.draw(e.pageData),Map.draw(e.mapData)}(e)})},drawHelloWorld:function(){Page.draw({topcontent:V.cN({tag:"p",html:"I am feeling happy!"}),position:"top"}),V.setMessage("Peter","Hi server 5?")}}}(),MediaComponents=function(){"use strict";function e(e){const t=V.castLinks(e);return V.castNode({tag:"div",classes:"feature__video-wrapper w-full",setStyle:{"feature__video-wrapper":{position:"relative","padding-bottom":"56.25%"},"feature__video-wrapper iframe":{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"}},html:t})}return{videoFeature:e,mediaCard:function(t){const n=V.cN({t:"li",c:"pxy w-screen"}),a=V.cN({t:"card",s:{mediacard__container:{height:"230px","max-width":"360px","flex-wrap":"wrap"}},c:"mediacard__container flex card-shadow rounded bkg-white pxy"}),s=V.cN({t:"p",c:"font-medium pxy",h:t.fullId}),o=e(t.properties.description);return V.setNode(a,s),V.setNode(a,o),V.setNode(n,a),n},listingsUl:function(){return V.castNode({tag:"ul",classes:"listings__ul flex flex-wrap content-start justify-evenly overflow-y-scroll",setStyle:{listings__ul:{height:"530px"}}})},featureUl:function(){return V.cN({tag:"ul"})}}}(),Media=function(){"use strict";function e(e){const t=MediaComponents.featureUl(),n=MediaComponents.videoFeature(e.feature);return V.setNode(t,n),{feature:t,position:"feature"}}function t(e){Page.draw(e),e.feature&&Feature.draw(e.feature)}return V.setNavItem([{title:"Media",role:"media",use:{button:"plus search",form:"new entity"},draw:function(){Media.draw({role:"media",feature:"https://youtu.be/XQEDw6IKTK8"})}},{title:"Moocs",role:"mooc",use:{button:"plus search",form:"new entity"},draw:function(){Media.draw({role:"mooc",feature:"https://youtu.be/ygJ4uu4XNM8"})}}]),{draw:function(n){V.setPipe(e,t)(n),setTimeout((function(){(async function(e){const t=MediaComponents.listingsUl(),n=await V.getEntity("by role",e);return n.data?n.data.forEach(e=>{const n=MediaComponents.mediaCard(e);V.setNode(t,n)}):V.setNode(t,V.sN({t:"p",h:"No entities found"})),{listings:t}})(n).then(e=>{t(e)})}),2e3)}}}();